<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.4.1 by Michael Rose
  Copyright 2017 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE.txt
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin SEO -->









<title>Mobile Applications Formal Element - Technobabble</title>




<meta name="description" content="This is the complete report I submitted for my Mobile Applications module in DT080B">




<meta name="author" content="Sean Dunbar">

<meta property="og:locale" content="en">
<meta property="og:site_name" content="Technobabble">
<meta property="og:title" content="Mobile Applications Formal Element">


  <link rel="canonical" href="https://sdunbar.me/mobile_applications/">
  <meta property="og:url" content="https://sdunbar.me/mobile_applications/">



  <meta property="og:description" content="This is the complete report I submitted for my Mobile Applications module in DT080B">



  <meta name="twitter:site" content="@venomireland">
  <meta name="twitter:title" content="Mobile Applications Formal Element">
  <meta name="twitter:description" content="This is the complete report I submitted for my Mobile Applications module in DT080B">
  <meta name="twitter:url" content="https://sdunbar.me/mobile_applications/">

  
    <meta name="twitter:card" content="summary">
    
      <meta name="twitter:image" content="https://sdunbar.me/assets/images/site-logo.jpg">
    
  

  
    <meta name="twitter:creator" content="@Sean Dunbar">
  



  

  



  <meta property="og:image" content="https://sdunbar.me/assets/images/site-logo.jpg">



  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2016-12-10T00:00:00+00:00">






  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "url": "https://sdunbar.me",
      "logo": "https://sdunbar.me/assets/images/site-logo.jpg"
    }
  </script>



  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "Sean Dunbar",
      "url" : "https://sdunbar.me",
      "sameAs" : null
    }
  </script>






<!-- end SEO -->


<link href="https://sdunbar.me/feed.xml" type="application/atom+xml" rel="alternate" title="Technobabble Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="https://sdunbar.me/assets/css/main.css">

<!--[if lte IE 9]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->

<meta http-equiv="cleartype" content="on">
    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->
  </head>

  <body class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    <div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <a class="site-title" href="https://sdunbar.me/">Technobabble</a>
        <ul class="visible-links">
          
            
            <li class="masthead__menu-item"><a href="https://sdunbar.me/cv/">Curriculum Vitae</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://sdunbar.me/categories/#college">College Work</a></li>
          
        </ul>
        <button><div class="navicon"></div></button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    



<div id="main" role="main">
  
  <div class="sidebar sticky">
  

<div itemscope itemtype="http://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="https://sdunbar.me/assets/images/bio-photo.jpg" class="author__avatar" alt="Sean Dunbar" itemprop="image">
      
    </div>
  

  <div class="author__content">
    <h3 class="author__name" itemprop="name">Sean Dunbar</h3>
    
      <p class="author__bio" itemprop="description">
        I am 22 year old male currently studying Networking Applications and Services in DIT
      </p>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="http://schema.org/Place">
          <i class="fa fa-fw fa-map-marker" aria-hidden="true"></i> <span itemprop="name">Dublin</span>
        </li>
      

      

      
        <li>
          <a href="mailto:sean@sdunbar.me">
            <meta itemprop="email" content="sean@sdunbar.me" />
            <i class="fa fa-fw fa-envelope-square" aria-hidden="true"></i> Email
          </a>
        </li>
      

      

      
        <li>
          <a href="https://twitter.com/venomireland" itemprop="sameAs">
            <i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter
          </a>
        </li>
      

      

      

      
        <li>
          <a href="https://www.linkedin.com/in/sean-dunbar-46687670" itemprop="sameAs">
            <i class="fa fa-fw fa-linkedin-square" aria-hidden="true"></i> LinkedIn
          </a>
        </li>
      

      

      

      

      

      
        <li>
          <a href="https://github.com/venomireland" itemprop="sameAs">
            <i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub
          </a>
        </li>
      

      

      

      

      

      

      
        <li>
          <a href="https://steamcommunity.com/id/venomireland" itemprop="sameAs">
            <i class="fa fa-fw fa-steam-square" aria-hidden="true"></i> Steam
          </a>
        </li>
      

      
        
          <li>
            <a href="https://www.youtube.com/channel/UCbsN9ZP_h4_joiB8zE7FpiQ" itemprop="sameAs">
              <i class="fa fa-fw fa-youtube-square" aria-hidden="true"></i> YouTube
            </a>
          </li>
        
      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs">
      <i class="fa fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Mobile Applications Formal Element">
    <meta itemprop="description" content="This is the complete report I submitted for my Mobile Applications module in DT080B">
    <meta itemprop="datePublished" content="December 10, 2016">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 class="page__title" itemprop="headline">Mobile Applications Formal Element
</h1>
          
            <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 




  14 minute read
</p>
          
        </header>
      

      <section class="page__content" itemprop="text">
        <h1 id="introduction">Introduction</h1>

<p>The purpose of this formal element was to design an application for Android Devices that meets the following requirements:</p>

<ul>
  <li>The user will use the app to take a photo of the room</li>
  <li>The user will then be able to superimpose a series of straight lines with double ended arrows onto the image</li>
  <li>The lines will be drawn using finger touch</li>
  <li>The user will also be able to add dimensions to each line</li>
</ul>

<p>In this report, I will outline how I have achieved this by describing the background design of the application, followed by a description of the code.</p>

<h1 id="table-of-contents">Table of Contents</h1>

<ul id="markdown-toc">
  <li><a href="#introduction" id="markdown-toc-introduction">Introduction</a></li>
  <li><a href="#table-of-contents" id="markdown-toc-table-of-contents">Table of Contents</a></li>
  <li><a href="#background" id="markdown-toc-background">Background</a></li>
  <li><a href="#flow-of-the-application" id="markdown-toc-flow-of-the-application">Flow of the Application</a></li>
  <li><a href="#overview" id="markdown-toc-overview">Overview</a></li>
  <li><a href="#main-activity" id="markdown-toc-main-activity">Main Activity</a>    <ul>
      <li><a href="#xml" id="markdown-toc-xml">XML</a></li>
      <li><a href="#imports" id="markdown-toc-imports">Imports</a></li>
      <li><a href="#main-class" id="markdown-toc-main-class">Main Class</a>        <ul>
          <li><a href="#oncreate" id="markdown-toc-oncreate">OnCreate()</a></li>
          <li><a href="#request_permissions" id="markdown-toc-request_permissions">Request_permissions()</a></li>
          <li><a href="#onclick" id="markdown-toc-onclick">onClick()</a></li>
          <li><a href="#getoutputmediafile" id="markdown-toc-getoutputmediafile">getOutputMediaFile()</a></li>
          <li><a href="#onactivityresult" id="markdown-toc-onactivityresult">onActivityResult()</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#draw-lines-class" id="markdown-toc-draw-lines-class">Draw Lines class</a>    <ul>
      <li><a href="#xml-1" id="markdown-toc-xml-1">XML</a></li>
      <li><a href="#main-class-1" id="markdown-toc-main-class-1">Main Class</a>        <ul>
          <li><a href="#oncreate-1" id="markdown-toc-oncreate-1">onCreate()</a></li>
          <li><a href="#getresizedbitmap" id="markdown-toc-getresizedbitmap">getResizedBitmap()</a></li>
          <li><a href="#ontouch" id="markdown-toc-ontouch">onTouch()</a></li>
          <li><a href="#onclick-1" id="markdown-toc-onclick-1">onClick()</a></li>
          <li><a href="#fillarrow" id="markdown-toc-fillarrow">fillArrow()</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#conclusion" id="markdown-toc-conclusion">Conclusion</a></li>
</ul>

<h1 id="background">Background</h1>

<p>The application will be designed in Android using Android Studio. This is an IDE maintained by Google specifically for the development of Android Apps.</p>

<p>It will consist of two activities; an activity represents a "screen" in an Android application. Activities can be swapped between and pass messages between each other using intents. In this application, the main_activity activity will use an intent to take a picture of an image, it will pass in a URI object into this intent, which is where the photo will be saved. It will then start another activity with the URI passed to it, draw_lines. Once draw_lines is finished, the imageView will be updated with the new image with lines drawn on it.</p>

<p>The main activity consists of a textView (an object in Android used to display text), a button (used to execute code on press) and an ImageView (used to display an image on screen). This activity will, on button press, start an intent for any application that can take photos, it will pass in the URI object (a location to store the photo at) as an extra; An intent is a way to start other activities in Android and pass data between them, an extra is how these messages are stored, accessed by using keys, which is a string used to identify the extra.</p>

<p>This activity will then start another intent for draw_lines, it will pass in a URI again which contains a link to the image. Once draw_lines has passed back in the URI after it is finished drawing, main_activity will then display the new image with lines.</p>

<p>The second activity, draw_lines, will display an image using an ImageView, which will then be drawable using a Canvas and Paint object. It will also feature an EditText field, for user-entered dimensions, and a button, for saving the image and exiting back to main_activity, returning the URI of the new image with it.</p>

<p>The main_activity class will also implement the OnClickListener interface, this means it must implement the onClick(View v) method. This is used to determine when an element on the screen is clicked on by the user. For the main_activity we want this on the "Launch Camera" button. Inside onClick we then have an if statement checking if it was pressed. If it was, we execute the code inside.</p>

<p>The draw_lines class implements the OnClickListener interfaces as well as the OnTouchListener, meaning it must implement onClick(View v) and onTouch(View v). onClick(View v) functions similarly to main_activity, in that is used to determine when a button is pressed. Then an  onTouch(View v) method is implemented. This is used to check when the user touches the screen and then removes his finger from the screen. In this class, we get the coordinates of when the user touches the screen, when he removes his finger we get the coordinates for that also. Then we draw the line between these two coordinates, draw the text from the EditText field in the middle of this line and finally add the arrowheads to it.</p>

<p>The main_activity class will also request permissions, which is required for Android Marshmallow and above, it does this by calling a request_permissions() method, which uses Android's built in methods to determine if we have permission to save images or not. If we don't it will prompt the user to grant the app permissions.</p>

<p>The layout will be constructed via XML, which is the language Android uses for displaying elements on the screen. Using this I will design the two layouts of the activities to be simple and understandable.</p>

<h1 id="flow-of-the-application">Flow of the Application</h1>
<p>Figure 1, flowchart of app</p>

<p><img src="/assets/images/college/flow.png" alt="flow" class="img-responsive" /></p>

<h1 id="overview">Overview</h1>
<p><img src="/assets/images/college/app1.png" alt="app1" class="img-responsive align-center" /></p>

<p>The main activity is the screen viewable upon opening the app, 
it features an imageview, along with a button to launch the camera Intent.</p>

<p><img src="/assets/images/college/app2.png" alt="app2" class="img-responsive align-center" /></p>

<p>Once the photo is captured, the draw_lines class is started, with the image displayed in the imageview.</p>

<p><img src="/assets/images/college/app3.png" alt="app3" class="img-responsive align-center" /></p>

<p>The user is then able to input the dimensions in the field at the bottom, which will be applied to any line drawn.</p>

<p><img src="/assets/images/college/app4.png" alt="app4" class="img-responsive align-center" /></p>

<p>Once the user has hit the finished button, this image is then saved, 
the main_acitivity screen is brought up again with the new image displayed.</p>

<h1 id="main-activity">Main Activity</h1>

<h2 id="xml">XML</h2>

<p>The code for this layout is as follows:</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml">    <span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
    <span class="nt">&lt;RelativeLayout</span> <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
    <span class="na">xmlns:tools=</span><span class="s">"http://schemas.android.com/tools"</span>
    <span class="na">android:id=</span><span class="s">"@+id/activity_main"</span>
    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"match_parent"</span>
    <span class="na">android:paddingBottom=</span><span class="s">"@dimen/activity_vertical_margin"</span>
    <span class="na">android:paddingLeft=</span><span class="s">"@dimen/activity_horizontal_margin"</span>
    <span class="na">android:paddingRight=</span><span class="s">"@dimen/activity_horizontal_margin"</span>
    <span class="na">android:paddingTop=</span><span class="s">"@dimen/activity_vertical_margin"</span>
    <span class="na">tools:context=</span><span class="s">"me.sdunbar.cameradistance.MainActivity"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;TextView</span>
        <span class="na">android:layout_width=</span><span class="s">"fill_parent"</span>
        <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
        <span class="na">android:text=</span><span class="s">"@string/intro"</span>
        <span class="na">android:layout_margin=</span><span class="s">"3dp"</span>
        <span class="na">android:textStyle=</span><span class="s">"bold"</span>
        <span class="na">android:id=</span><span class="s">"@+id/textView"</span><span class="nt">/&gt;</span>

    <span class="nt">&lt;Button</span>
        <span class="na">android:id=</span><span class="s">"@+id/capture_btn"</span>
        <span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>
        <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
        <span class="na">android:text=</span><span class="s">"@string/capture"</span>
        <span class="na">android:layout_below=</span><span class="s">"@+id/textView"</span>
        <span class="na">android:layout_alignLeft=</span><span class="s">"@+id/textView"</span>
        <span class="na">android:layout_alignStart=</span><span class="s">"@+id/textView"</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;ImageView</span>
        <span class="na">android:id=</span><span class="s">"@+id/picture"</span>
        <span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>
        <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
        <span class="na">android:minHeight=</span><span class="s">"300dp"</span>
        <span class="na">android:minWidth=</span><span class="s">"300dp"</span>
        <span class="na">android:contentDescription=</span><span class="s">"@string/picture"</span>
        <span class="na">android:background=</span><span class="s">"@drawable/pic_border"</span>
        <span class="na">android:layout_below=</span><span class="s">"@+id/capture_btn"</span>
        <span class="na">android:layout_alignLeft=</span><span class="s">"@+id/capture_btn"</span>
        <span class="na">android:layout_alignStart=</span><span class="s">"@+id/capture_btn"</span>
        <span class="na">android:scaleType=</span><span class="s">"fitXY"</span><span class="nt">/&gt;</span>

    <span class="nt">&lt;/RelativeLayout&gt;</span>
    </code></pre></figure>

<h2 id="imports">Imports</h2>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kn">import</span> <span class="nn">android.Manifest</span><span class="o">;</span>
    <span class="kn">import</span> <span class="nn">android.content.pm.PackageManager</span><span class="o">;</span>
    <span class="kn">import</span> <span class="nn">android.graphics.BitmapFactory</span><span class="o">;</span>
    <span class="kn">import</span> <span class="nn">android.os.Environment</span><span class="o">;</span>
    <span class="kn">import</span> <span class="nn">android.support.v4.app.ActivityCompat</span><span class="o">;</span>
    <span class="kn">import</span> <span class="nn">android.support.v4.content.ContextCompat</span><span class="o">;</span>
    <span class="kn">import</span> <span class="nn">android.support.v7.app.AppCompatActivity</span><span class="o">;</span>
    <span class="kn">import</span> <span class="nn">android.os.Bundle</span><span class="o">;</span>
    <span class="kn">import</span> <span class="nn">android.content.ActivityNotFoundException</span><span class="o">;</span>
    <span class="kn">import</span> <span class="nn">android.content.Intent</span><span class="o">;</span>
    <span class="kn">import</span> <span class="nn">android.graphics.Bitmap</span><span class="o">;</span>
    <span class="kn">import</span> <span class="nn">android.net.Uri</span><span class="o">;</span>
    <span class="kn">import</span> <span class="nn">android.provider.MediaStore</span><span class="o">;</span>
    <span class="kn">import</span> <span class="nn">android.view.View</span><span class="o">;</span>
    <span class="kn">import</span> <span class="nn">android.view.View.OnClickListener</span><span class="o">;</span>
    <span class="kn">import</span> <span class="nn">android.widget.Button</span><span class="o">;</span>
    <span class="kn">import</span> <span class="nn">android.widget.ImageView</span><span class="o">;</span>
    <span class="kn">import</span> <span class="nn">android.widget.Toast</span><span class="o">;</span>
    <span class="kn">import</span> <span class="nn">java.io.File</span><span class="o">;</span>
    <span class="kn">import</span> <span class="nn">java.io.FileNotFoundException</span><span class="o">;</span>
    <span class="kn">import</span> <span class="nn">java.io.InputStream</span><span class="o">;</span>
    <span class="kn">import</span> <span class="nn">java.text.SimpleDateFormat</span><span class="o">;</span>
    <span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>
    </code></pre></figure>

<p>These imports allow the use of various methods within the class.</p>

<h2 id="main-class">Main Class</h2>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainActivity</span> <span class="kd">extends</span> <span class="n">AppCompatActivity</span> <span class="kd">implements</span> <span class="n">OnClickListener</span> <span class="o">{</span>
    </code></pre></figure>

<p>This line defines the start of the block of code making up the class MainActivity, we also implement the OnClickListener interface to allow us to use the button.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kd">final</span> <span class="kt">int</span> <span class="n">CAMERA_CAPTURE</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
    <span class="kd">public</span> <span class="n">Uri</span> <span class="n">picUri</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">APP_REQUEST</span> <span class="o">=</span> <span class="mi">69</span><span class="o">;</span>
    <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">EXTRA_MESSAGE</span>  <span class="o">=</span>  <span class="s">"me.sdunbar.intenttest.myKey"</span><span class="o">;</span>
    <span class="n">Bitmap</span> <span class="n">thePic</span><span class="o">;</span>
    <span class="n">ImageView</span> <span class="n">mImageView</span><span class="o">;</span>
    </code></pre></figure>

<p>These variable declarations are done at the top, to be able to use them throughout the class.</p>

<h3 id="oncreate">OnCreate()</h3>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
      <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
      <span class="n">setContentView</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">activity_main</span><span class="o">);</span>
      <span class="c1">//retrieve a reference to the UI button</span>
      <span class="n">Button</span> <span class="n">captureBtn</span> <span class="o">=</span> <span class="o">(</span><span class="n">Button</span><span class="o">)</span><span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">capture_btn</span><span class="o">);</span>
      <span class="c1">//handle button clicks</span>
      <span class="n">captureBtn</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
      <span class="n">mImageView</span> <span class="o">=</span> <span class="o">(</span><span class="n">ImageView</span><span class="o">)</span><span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">picture</span><span class="o">);</span>

      <span class="n">request_permissions</span><span class="o">();</span>
    <span class="o">}</span>
    </code></pre></figure>

<p>This instantiates the button and imageview, sets the onClickListener for the button, as well as starts the request_permissions() method, which is used to allow us to save to external storage.</p>

<h3 id="request_permissions">Request_permissions()</h3>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">request_permissions</span><span class="o">(){</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">ContextCompat</span><span class="o">.</span><span class="na">checkSelfPermission</span><span class="o">(</span><span class="k">this</span><span class="o">,</span>
                <span class="n">Manifest</span><span class="o">.</span><span class="na">permission</span><span class="o">.</span><span class="na">WRITE_EXTERNAL_STORAGE</span><span class="o">)</span>
                <span class="o">!=</span> <span class="n">PackageManager</span><span class="o">.</span><span class="na">PERMISSION_GRANTED</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">ActivityCompat</span><span class="o">.</span><span class="na">shouldShowRequestPermissionRationale</span><span class="o">(</span><span class="k">this</span><span class="o">,</span>
                    <span class="n">Manifest</span><span class="o">.</span><span class="na">permission</span><span class="o">.</span><span class="na">WRITE_EXTERNAL_STORAGE</span><span class="o">))</span> <span class="o">{</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="n">ActivityCompat</span><span class="o">.</span><span class="na">requestPermissions</span><span class="o">(</span><span class="k">this</span><span class="o">,</span>
                        <span class="k">new</span> <span class="n">String</span><span class="o">[]{</span><span class="n">Manifest</span><span class="o">.</span><span class="na">permission</span><span class="o">.</span><span class="na">WRITE_EXTERNAL_STORAGE</span><span class="o">},</span>
                        <span class="mi">2</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
    </code></pre></figure>

<p>This block of code was available from Android's official documentation, it first checks if we have permissions to write to external storage, if not, it prompts the user for permission.</p>

<h3 id="onclick">onClick()</h3>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onClick</span><span class="o">(</span><span class="n">View</span> <span class="n">v</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">v</span><span class="o">.</span><span class="na">getId</span><span class="o">()</span> <span class="o">==</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">capture_btn</span><span class="o">)</span> <span class="o">{</span>
          <span class="k">try</span> <span class="o">{</span>
              <span class="c1">//use standard intent to capture an image</span>
              <span class="n">Intent</span> <span class="n">captureIntent</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">(</span><span class="n">MediaStore</span><span class="o">.</span><span class="na">ACTION_IMAGE_CAPTURE</span><span class="o">);</span>
              <span class="n">picUri</span> <span class="o">=</span> <span class="n">Uri</span><span class="o">.</span><span class="na">fromFile</span><span class="o">(</span><span class="n">getOutputMediaFile</span><span class="o">());</span>
              <span class="n">captureIntent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="n">MediaStore</span><span class="o">.</span><span class="na">EXTRA_OUTPUT</span><span class="o">,</span> <span class="n">picUri</span><span class="o">);</span>

              <span class="c1">//we will handle the returned data in onActivityResult</span>
              <span class="n">startActivityForResult</span><span class="o">(</span><span class="n">captureIntent</span><span class="o">,</span> <span class="n">CAMERA_CAPTURE</span><span class="o">);</span>
          <span class="o">}</span>
          <span class="k">catch</span><span class="o">(</span><span class="n">ActivityNotFoundException</span> <span class="n">anfe</span><span class="o">){</span>
              <span class="c1">//display an error message</span>
              <span class="n">String</span> <span class="n">errorMessage</span> <span class="o">=</span> <span class="s">"Whoops - your device doesn't support capturing images!"</span><span class="o">;</span>
              <span class="n">Toast</span> <span class="n">toast</span> <span class="o">=</span> <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">errorMessage</span><span class="o">,</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_SHORT</span><span class="o">);</span>
              <span class="n">toast</span><span class="o">.</span><span class="na">show</span><span class="o">();</span>
          <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">}</span>
    </code></pre></figure>

<p>This is the onClick handler, if the capture button is pressed, we declare and instantiate an Intent called CaptureIntent, this will use ANY application on the phone that can respond to this request. We also pass in a URI, defined from getOutputMediaFile(), we add this as an extra into captureIntent so that the application will save the image at the URI given to it. We then start this intent with startActivityForResult and the request code CAMERA_CAPTURE.</p>

<p>The error handling in the catch is for if no application can respond to the intent request. It will pop up a toast (sliding notification from the bottom of the screen) to alert the user that no camera app is available.</p>

<h3 id="getoutputmediafile">getOutputMediaFile()</h3>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kd">private</span> <span class="n">File</span> <span class="nf">getOutputMediaFile</span><span class="o">(){</span>
        <span class="n">File</span> <span class="n">mediaStorageDir</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">Environment</span><span class="o">.</span><span class="na">getExternalStoragePublicDirectory</span><span class="o">(</span>
               <span class="n">Environment</span><span class="o">.</span><span class="na">DIRECTORY_PICTURES</span><span class="o">),</span> <span class="s">"CameraDemo"</span><span class="o">);</span>


        <span class="k">if</span> <span class="o">(!</span><span class="n">mediaStorageDir</span><span class="o">.</span><span class="na">exists</span><span class="o">()){</span>
            <span class="k">if</span> <span class="o">(!</span><span class="n">mediaStorageDir</span><span class="o">.</span><span class="na">mkdirs</span><span class="o">()){</span>
                <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="n">String</span> <span class="n">timeStamp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s">"yyyyMMdd_HHmmss"</span><span class="o">).</span><span class="na">format</span><span class="o">(</span><span class="k">new</span> <span class="n">Date</span><span class="o">());</span>
        <span class="n">String</span> <span class="n">imageFileName</span> <span class="o">=</span> <span class="n">timeStamp</span><span class="o">;</span>

        <span class="k">return</span> <span class="k">new</span> <span class="nf">File</span><span class="o">(</span><span class="n">mediaStorageDir</span><span class="o">.</span><span class="na">getPath</span><span class="o">()</span> <span class="o">+</span> <span class="n">File</span><span class="o">.</span><span class="na">separator</span> <span class="o">+</span>
                <span class="n">imageFileName</span> <span class="o">+</span> <span class="s">".png"</span><span class="o">);</span>
    <span class="o">}</span>
    </code></pre></figure>

<p>This is used to determine where to store the saved file and what to call it, first we create a file by calling:</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="n">Environment</span><span class="o">.</span><span class="na">_getExternalStoragePublicDirectory_</span><span class="o">(</span><span class="n">Environment</span><span class="o">.</span><span class="na">_DIRECTORY</span><span class="err">\</span><span class="n">_PICTURES_</span><span class="o">)</span>
    </code></pre></figure>

<p>This returns the location that Android has determined to be the public folder for storing pictures, the other variable "CameraDemo" allows us to create a folder called CameraDemo for storing our own images.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="k">if</span> <span class="o">(!</span><span class="n">mediaStorageDir</span><span class="o">.</span><span class="na">exists</span><span class="o">()){</span>
            <span class="k">if</span> <span class="o">(!</span><span class="n">mediaStorageDir</span><span class="o">.</span><span class="na">mkdirs</span><span class="o">()){</span>
                <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
    </code></pre></figure>

<p>This allows us to check if the folder exists and to attempt to create it if it does not.</p>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="n">String</span> <span class="n">timeStamp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s">"yyyyMMdd_HHmmss"</span><span class="o">).</span><span class="na">format</span><span class="o">(</span><span class="k">new</span> <span class="n">Date</span><span class="o">());</span>
        <span class="n">String</span> <span class="n">imageFileName</span> <span class="o">=</span> <span class="n">timeStamp</span><span class="o">;</span>

        <span class="k">return</span> <span class="k">new</span> <span class="nf">File</span><span class="o">(</span><span class="n">mediaStorageDir</span><span class="o">.</span><span class="na">getPath</span><span class="o">()</span> <span class="o">+</span> <span class="n">File</span><span class="o">.</span><span class="na">separator</span> <span class="o">+</span>
                <span class="n">imageFileName</span> <span class="o">+</span> <span class="s">".png"</span><span class="o">);</span>
    </code></pre></figure>

<p>This generates a timestamp of the current time and formats it. We then return a file object with the path, filename and the extension .png.</p>

<h3 id="onactivityresult">onActivityResult()</h3>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onActivityResult</span><span class="o">(</span><span class="kt">int</span> <span class="n">requestCode</span><span class="o">,</span> <span class="kt">int</span> <span class="n">resultCode</span><span class="o">,</span> <span class="n">Intent</span> <span class="n">data</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">resultCode</span> <span class="o">==</span> <span class="n">RESULT_OK</span><span class="o">)</span> <span class="o">{</span>
          <span class="c1">//user is returning from capturing an image using the camera</span>
          <span class="k">if</span><span class="o">(</span><span class="n">requestCode</span> <span class="o">==</span> <span class="n">CAMERA_CAPTURE</span><span class="o">){</span>

              <span class="k">try</span> <span class="o">{</span>
                  <span class="n">InputStream</span> <span class="n">image_stream</span> <span class="o">=</span> <span class="n">getContentResolver</span><span class="o">().</span><span class="na">openInputStream</span><span class="o">(</span><span class="n">picUri</span><span class="o">);</span>
                  <span class="n">thePic</span> <span class="o">=</span> <span class="n">BitmapFactory</span><span class="o">.</span><span class="na">decodeStream</span><span class="o">(</span><span class="n">image_stream</span> <span class="o">);</span>
              <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">FileNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                  <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
              <span class="o">}</span>


              <span class="c1">//retrieve a reference to the ImageView</span>
              <span class="n">ImageView</span> <span class="n">picView</span> <span class="o">=</span> <span class="o">(</span><span class="n">ImageView</span><span class="o">)</span><span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">picture</span><span class="o">);</span>
              <span class="c1">//display the returned image</span>
              <span class="n">picView</span><span class="o">.</span><span class="na">setImageBitmap</span><span class="o">(</span><span class="n">thePic</span><span class="o">);</span>

              <span class="c1">//start intent to draw lines</span>
              <span class="n">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">Draw_lines</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
              <span class="n">intent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="n">EXTRA_MESSAGE</span><span class="o">,</span> <span class="n">picUri</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
              <span class="n">startActivityForResult</span><span class="o">(</span><span class="n">intent</span><span class="o">,</span> <span class="n">APP_REQUEST</span><span class="o">);</span>
          <span class="o">}</span>
          <span class="k">else</span> <span class="nf">if</span> <span class="o">(</span><span class="n">requestCode</span> <span class="o">==</span> <span class="n">APP_REQUEST</span><span class="o">){</span>
      <span class="n">Bundle</span> <span class="n">extras</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="na">getExtras</span><span class="o">();</span>
      <span class="n">Uri</span> <span class="n">picUri</span> <span class="o">=</span> <span class="n">Uri</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">extras</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="n">EXTRA_MESSAGE</span><span class="o">));</span>

      <span class="k">try</span> <span class="o">{</span>
          <span class="n">InputStream</span> <span class="n">image_stream</span> <span class="o">=</span> <span class="n">getContentResolver</span><span class="o">().</span><span class="na">openInputStream</span><span class="o">(</span><span class="n">picUri</span><span class="o">);</span>
          <span class="n">thePic</span> <span class="o">=</span> <span class="n">BitmapFactory</span><span class="o">.</span><span class="na">decodeStream</span><span class="o">(</span><span class="n">image_stream</span> <span class="o">);</span>
      <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">FileNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
          <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
      <span class="o">}</span>


      <span class="c1">//retrieve a reference to the ImageView</span>
      <span class="n">ImageView</span> <span class="n">picView</span> <span class="o">=</span> <span class="o">(</span><span class="n">ImageView</span><span class="o">)</span><span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">picture</span><span class="o">);</span>
      <span class="c1">//display the returned image</span>
      <span class="n">picView</span><span class="o">.</span><span class="na">setImageBitmap</span><span class="o">(</span><span class="n">thePic</span><span class="o">);</span>
    <span class="o">}</span>
    </code></pre></figure>

<p>In this block of code, we first check if the resultCode was RESULT_OK, If it was, we check if the requestCode was CAMERA_CAPTURE. If these are both true, we create an InputStream of the picUri and create a bitmap from it. Supposedly, creating it from an InputStream instead of decoding directly saves massively on memory usage, especially with images as big as the ones that will be taken. This block will print the stacktrace in console if it cannot find the file.</p>

<p>We then get a reference to the imageView and display the image on it.</p>

<p>After this, we create a new intent for the Draw_lines class, we then hand it the URI in extras with the key EXTRA_MESSAGE. Then, it is started for result with the request code APP_REQUEST. Once the Draw_lines class is finished, it returns the URI as a string, which is then parsed here and displayed on the imageview.</p>

<h1 id="draw-lines-class">Draw Lines class</h1>

<h2 id="xml-1">XML</h2>

<p>The code for this layout is as follows:</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml">    <span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
    <span class="nt">&lt;RelativeLayout</span> <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
    <span class="na">xmlns:tools=</span><span class="s">"http://schemas.android.com/tools"</span>
    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"match_parent"</span> <span class="nt">&gt;</span>

    <span class="nt">&lt;ImageView</span>
        <span class="na">android:id=</span><span class="s">"@+id/picture"</span>
        <span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>
        <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
        <span class="na">android:layout_alignParentLeft=</span><span class="s">"true"</span>
        <span class="na">android:layout_alignParentRight=</span><span class="s">"true"</span>
        <span class="na">android:layout_alignParentTop=</span><span class="s">"true"</span>
        <span class="na">android:layout_above=</span><span class="s">"@+id/finBtn"</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;Button</span>
        <span class="na">android:text=</span><span class="s">"Finished"</span>
        <span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>
        <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
        <span class="na">android:id=</span><span class="s">"@+id/finBtn"</span>
        <span class="na">android:layout_alignParentBottom=</span><span class="s">"true"</span>
        <span class="na">android:layout_alignParentRight=</span><span class="s">"true"</span>
        <span class="na">android:layout_alignParentEnd=</span><span class="s">"true"</span>
        <span class="na">android:layout_marginRight=</span><span class="s">"27dp"</span>
        <span class="na">android:layout_marginEnd=</span><span class="s">"27dp"</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;EditText</span>
        <span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>
        <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
        <span class="na">android:inputType=</span><span class="s">"text"</span>
        <span class="na">android:text=</span><span class="s">"Name"</span>
        <span class="na">android:ems=</span><span class="s">"10"</span>
        <span class="na">android:layout_alignParentBottom=</span><span class="s">"true"</span>
        <span class="na">android:layout_alignParentLeft=</span><span class="s">"true"</span>
        <span class="na">android:layout_alignParentStart=</span><span class="s">"true"</span>
        <span class="na">android:layout_marginLeft=</span><span class="s">"15dp"</span>
        <span class="na">android:layout_marginStart=</span><span class="s">"15dp"</span>
        <span class="na">android:id=</span><span class="s">"@+id/editText"</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;/RelativeLayout&gt;</span>
    </code></pre></figure>

<h2 id="main-class-1">Main Class</h2>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Draw_lines</span> <span class="kd">extends</span> <span class="n">Activity</span> <span class="kd">implements</span> <span class="n">OnTouchListener</span><span class="o">,</span> <span class="n">View</span><span class="o">.</span><span class="na">OnClickListener</span> <span class="o">{</span>
        <span class="n">ImageView</span> <span class="n">imageView</span><span class="o">;</span>
        <span class="n">Canvas</span> <span class="n">canvas</span><span class="o">;</span>
        <span class="n">Paint</span> <span class="n">paint</span><span class="o">,</span> <span class="n">textPaint</span><span class="o">;</span>
        <span class="kt">float</span> <span class="n">downx</span> <span class="o">=</span> <span class="mi">0</span><span class="o">,</span> <span class="n">downy</span> <span class="o">=</span> <span class="mi">0</span><span class="o">,</span> <span class="n">upx</span> <span class="o">=</span> <span class="mi">0</span><span class="o">,</span> <span class="n">upy</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="n">Intent</span> <span class="n">intent</span><span class="o">;</span>
        <span class="n">Bitmap</span> <span class="n">thePic</span><span class="o">;</span>
        <span class="n">Button</span> <span class="n">capture</span><span class="o">;</span>
        <span class="kt">int</span><span class="o">[]</span> <span class="n">viewCoords</span><span class="o">;</span>
        <span class="n">Uri</span> <span class="n">picUri</span><span class="o">;</span>
        <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">EXTRA_MESSAGE</span>  <span class="o">=</span>  <span class="s">"me.sdunbar.intenttest.myKey"</span><span class="o">;</span>
        <span class="n">EditText</span> <span class="n">et</span><span class="o">;</span>
        <span class="kt">float</span> <span class="n">fixx</span><span class="o">,</span> <span class="n">fixy</span><span class="o">;</span>
        <span class="n">File</span> <span class="n">file</span><span class="o">;</span>
    </code></pre></figure>

<p>Here, we also implemenet OnTouchListener, this allows us to check for finger presses on the screen instead of just if a button has been pressed, we also declare a number of variables at the start, much like main_activity.</p>

<h3 id="oncreate-1">onCreate()</h3>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
        <span class="n">setContentView</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">activity_draw_lines</span><span class="o">);</span>

        <span class="n">imageView</span> <span class="o">=</span> <span class="o">(</span><span class="n">ImageView</span><span class="o">)</span> <span class="k">this</span><span class="o">.</span><span class="na">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">picture</span><span class="o">);</span>
        <span class="n">et</span> <span class="o">=</span> <span class="o">(</span><span class="n">EditText</span><span class="o">)</span> <span class="k">this</span><span class="o">.</span><span class="na">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">editText</span><span class="o">);</span>

        <span class="n">Display</span> <span class="n">currentDisplay</span> <span class="o">=</span> <span class="n">getWindowManager</span><span class="o">().</span><span class="na">getDefaultDisplay</span><span class="o">();</span>
        <span class="kt">int</span> <span class="n">dw</span> <span class="o">=</span> <span class="n">currentDisplay</span><span class="o">.</span><span class="na">getWidth</span><span class="o">();</span>
        <span class="kt">int</span> <span class="n">dh</span> <span class="o">=</span> <span class="n">currentDisplay</span><span class="o">.</span><span class="na">getHeight</span><span class="o">();</span>

        <span class="n">intent</span> <span class="o">=</span> <span class="n">getIntent</span><span class="o">();</span>
        <span class="n">capture</span> <span class="o">=</span> <span class="o">(</span><span class="n">Button</span><span class="o">)</span><span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">finBtn</span><span class="o">);</span>

        <span class="n">Bundle</span> <span class="n">extras</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getExtras</span><span class="o">();</span>
        <span class="n">picUri</span> <span class="o">=</span> <span class="n">Uri</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">extras</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="n">EXTRA_MESSAGE</span><span class="o">));</span>

        <span class="k">try</span> <span class="o">{</span>
            <span class="n">InputStream</span> <span class="n">image_stream</span> <span class="o">=</span> <span class="n">getContentResolver</span><span class="o">().</span><span class="na">openInputStream</span><span class="o">(</span><span class="n">picUri</span><span class="o">);</span>
            <span class="n">thePic</span> <span class="o">=</span> <span class="n">BitmapFactory</span><span class="o">.</span><span class="na">decodeStream</span><span class="o">(</span><span class="n">image_stream</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">FileNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="n">thePic</span> <span class="o">=</span> <span class="n">getResizedBitmap</span><span class="o">(</span><span class="n">thePic</span><span class="o">,</span> <span class="n">dw</span><span class="o">,</span> <span class="n">dh</span><span class="o">);</span>

        <span class="n">canvas</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Canvas</span><span class="o">();</span>
        <span class="n">canvas</span><span class="o">.</span><span class="na">setBitmap</span><span class="o">(</span><span class="n">thePic</span><span class="o">);</span>

        <span class="n">paint</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Paint</span><span class="o">();</span>
        <span class="n">paint</span><span class="o">.</span><span class="na">setColor</span><span class="o">(</span><span class="n">Color</span><span class="o">.</span><span class="na">BLACK</span><span class="o">);</span>
        <span class="n">paint</span><span class="o">.</span><span class="na">setStrokeWidth</span><span class="o">(</span><span class="mf">7.0f</span><span class="o">);</span>
        <span class="n">paint</span><span class="o">.</span><span class="na">setTextSize</span><span class="o">(</span><span class="mi">20</span><span class="o">);</span>

        <span class="n">textPaint</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Paint</span><span class="o">();</span>
        <span class="n">textPaint</span><span class="o">.</span><span class="na">setColor</span><span class="o">(</span><span class="n">Color</span><span class="o">.</span><span class="na">WHITE</span><span class="o">);</span>
        <span class="n">textPaint</span><span class="o">.</span><span class="na">setStrokeWidth</span><span class="o">(</span><span class="mf">7.0f</span><span class="o">);</span>
        <span class="n">textPaint</span><span class="o">.</span><span class="na">setTextSize</span><span class="o">(</span><span class="mi">50</span><span class="o">);</span>

        <span class="n">imageView</span><span class="o">.</span><span class="na">setImageBitmap</span><span class="o">(</span><span class="n">thePic</span><span class="o">);</span>

        <span class="n">imageView</span><span class="o">.</span><span class="na">setOnTouchListener</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
        <span class="n">capture</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
    <span class="o">}</span>
    </code></pre></figure>

<p>Since this will be started as an intent, once we've set the content view as usual and declared the imageView, editText, display etc. we begin parsing the Uri passed in. We do this by creating a Bundle called extras and then parsing the string that was stored with the key EXTRA_MESSAGE.</p>

<p>With this key, we create an inputstream again to create the bitmap which we have named thePic. We then call the getResizedBitmap() method which will be explained below.</p>

<p>Then we create the canvas and call setBitmap(thePic), this allows us to draw on and modify it.</p>

<p>We then create two Paint() objects, one for the line and the other for text.</p>

<p>Finally we set the imageView to thePic, so as to see the image we are drawing on. Then we set the onClickListener and onTouchListener as required.</p>

<h3 id="getresizedbitmap">getResizedBitmap()</h3>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kd">public</span> <span class="n">Bitmap</span> <span class="nf">getResizedBitmap</span><span class="o">(</span><span class="n">Bitmap</span> <span class="n">bm</span><span class="o">,</span> <span class="kt">int</span> <span class="n">maxHeight</span><span class="o">,</span> <span class="kt">int</span> <span class="n">maxWidth</span><span class="o">)</span> <span class="o">{</span>

        <span class="kt">float</span> <span class="n">scale</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">min</span><span class="o">(((</span><span class="kt">float</span><span class="o">)</span><span class="n">maxHeight</span> <span class="o">/</span> <span class="n">bm</span><span class="o">.</span><span class="na">getWidth</span><span class="o">()),</span> <span class="o">((</span><span class="kt">float</span><span class="o">)</span><span class="n">maxWidth</span> <span class="o">/</span> <span class="n">bm</span><span class="o">.</span><span class="na">getHeight</span><span class="o">()));</span>

        <span class="n">Matrix</span> <span class="n">matrix</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Matrix</span><span class="o">();</span>
        <span class="n">matrix</span><span class="o">.</span><span class="na">postScale</span><span class="o">(</span><span class="n">scale</span><span class="o">,</span> <span class="n">scale</span><span class="o">);</span>

        <span class="k">return</span> <span class="n">Bitmap</span><span class="o">.</span><span class="na">createBitmap</span><span class="o">(</span><span class="n">bm</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">bm</span><span class="o">.</span><span class="na">getWidth</span><span class="o">(),</span> <span class="n">bm</span><span class="o">.</span><span class="na">getHeight</span><span class="o">(),</span> <span class="n">matrix</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
    <span class="o">}</span>
    </code></pre></figure>

<p>This is the code used to scale the bitmap, which was created by user "Kevin" at <a href="http://stackoverflow.com/questions/4837715/how-to-resize-a-bitmap-in-android">http://stackoverflow.com/questions/4837715/how-to-resize-a-bitmap-in-android</a></p>

<p>I then modified his code somewhat, to pass in my own dimensions. It takes in a bitmap and a max height and width. It then creates a float representing the aspect ratio of the image, creating a Matrix object based on this, it then returns a new bitmap with this scaling applied.</p>

<h3 id="ontouch">onTouch()</h3>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">onTouch</span><span class="o">(</span><span class="n">View</span> <span class="n">v</span><span class="o">,</span> <span class="n">MotionEvent</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">action</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="na">getAction</span><span class="o">();</span>
        <span class="k">switch</span> <span class="o">(</span><span class="n">action</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">case</span> <span class="n">MotionEvent</span><span class="o">.</span><span class="na">ACTION_DOWN</span><span class="o">:</span>
                <span class="n">downx</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="na">getX</span><span class="o">();</span>
                <span class="n">downy</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="na">getY</span><span class="o">();</span>
                <span class="k">break</span><span class="o">;</span>
            <span class="k">case</span> <span class="n">MotionEvent</span><span class="o">.</span><span class="na">ACTION_MOVE</span><span class="o">:</span>
                <span class="k">break</span><span class="o">;</span>
            <span class="k">case</span> <span class="n">MotionEvent</span><span class="o">.</span><span class="na">ACTION_UP</span><span class="o">:</span>
                <span class="n">upx</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="na">getX</span><span class="o">();</span>
                <span class="n">upy</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="na">getY</span><span class="o">();</span>
                <span class="n">canvas</span><span class="o">.</span><span class="na">drawLine</span><span class="o">(</span><span class="n">downx</span><span class="o">,</span> <span class="n">downy</span><span class="o">,</span> <span class="n">upx</span><span class="o">,</span> <span class="n">upy</span><span class="o">,</span> <span class="n">paint</span><span class="o">);</span>
                <span class="n">fillArrow</span><span class="o">(</span><span class="n">canvas</span><span class="o">,</span> <span class="n">downx</span><span class="o">,</span> <span class="n">downy</span><span class="o">,</span> <span class="n">upx</span><span class="o">,</span> <span class="n">upy</span><span class="o">);</span>

                <span class="kt">float</span> <span class="n">textx</span> <span class="o">=</span> <span class="o">(</span><span class="n">downx</span> <span class="o">+</span> <span class="n">upx</span><span class="o">)</span> <span class="o">/</span> <span class="mi">2</span><span class="o">;</span>
                <span class="kt">float</span> <span class="n">texty</span> <span class="o">=</span> <span class="o">(</span><span class="n">downy</span> <span class="o">+</span> <span class="n">upy</span><span class="o">)</span> <span class="o">/</span> <span class="mi">2</span><span class="o">;</span>

                <span class="n">canvas</span><span class="o">.</span><span class="na">drawText</span><span class="o">(</span><span class="n">et</span><span class="o">.</span><span class="na">getText</span><span class="o">().</span><span class="na">toString</span><span class="o">(),</span> <span class="n">textx</span><span class="o">,</span> <span class="n">texty</span><span class="o">,</span> <span class="n">textPaint</span><span class="o">);</span>
                <span class="n">imageView</span><span class="o">.</span><span class="na">invalidate</span><span class="o">();</span>
                <span class="k">break</span><span class="o">;</span>
            <span class="k">case</span> <span class="n">MotionEvent</span><span class="o">.</span><span class="na">ACTION_CANCEL</span><span class="o">:</span>
                <span class="k">break</span><span class="o">;</span>
            <span class="k">default</span><span class="o">:</span>
                <span class="k">break</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>
    </code></pre></figure>

<p>This code handles when we touch the imageview, when the finger is pressed down, we get the coordinates, when the finger is released we grab the coordinates for that also.</p>

<p>With these coordinates, we draw a line, and then call fillArrow() to add arrowheads to the ends of the line.</p>

<p>We then average the X and Y coordinates of the start and end. We call drawText with the text from the editText, along with the coordinates and the textPaint object. We then invalidate the imageView to refresh it.</p>

<h3 id="onclick-1">onClick()</h3>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onClick</span><span class="o">(</span><span class="n">View</span> <span class="n">v</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">v</span><span class="o">.</span><span class="na">getId</span><span class="o">()</span> <span class="o">==</span> <span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">finBtn</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// Here, thisActivity is the current activity</span>
            <span class="n">FileOutputStream</span> <span class="n">out</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
            <span class="n">String</span> <span class="n">path</span> <span class="o">=</span> <span class="n">Environment</span><span class="o">.</span><span class="na">getExternalStorageDirectory</span><span class="o">().</span><span class="na">toString</span><span class="o">();</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">File</span> <span class="n">mediaStorageDir</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">Environment</span><span class="o">.</span><span class="na">getExternalStoragePublicDirectory</span><span class="o">(</span>
                        <span class="n">Environment</span><span class="o">.</span><span class="na">DIRECTORY_PICTURES</span><span class="o">),</span> <span class="s">"CameraDemo"</span><span class="o">);</span>

                <span class="n">String</span> <span class="n">timeStamp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s">"yyyyMMdd_HHmmss"</span><span class="o">).</span><span class="na">format</span><span class="o">(</span><span class="k">new</span> <span class="n">Date</span><span class="o">());</span>
                <span class="n">String</span> <span class="n">imageFileName</span> <span class="o">=</span> <span class="n">timeStamp</span><span class="o">;</span>

                <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">mediaStorageDir</span><span class="o">.</span><span class="na">getPath</span><span class="o">()</span> <span class="o">+</span> <span class="n">File</span><span class="o">.</span><span class="na">separator</span> <span class="o">+</span>
                        <span class="n">imageFileName</span> <span class="o">+</span> <span class="s">"_lines.png"</span><span class="o">);</span>

                <span class="n">out</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
                <span class="n">thePic</span><span class="o">.</span><span class="na">compress</span><span class="o">(</span><span class="n">Bitmap</span><span class="o">.</span><span class="na">CompressFormat</span><span class="o">.</span><span class="na">PNG</span><span class="o">,</span> <span class="mi">100</span><span class="o">,</span> <span class="n">out</span><span class="o">);</span> <span class="c1">// bmp is your Bitmap instance</span>
                <span class="c1">// PNG is a lossless format, the compression factor (100) is ignored</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
                <span class="k">try</span> <span class="o">{</span>
                    <span class="k">if</span> <span class="o">(</span><span class="n">out</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">out</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
                    <span class="o">}</span>
                <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                <span class="o">}</span>
            <span class="o">}</span>
            <span class="n">Intent</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">();</span>

            <span class="n">picUri</span> <span class="o">=</span> <span class="n">Uri</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">toURI</span><span class="o">().</span><span class="na">toString</span><span class="o">());</span>
            <span class="n">result</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="n">EXTRA_MESSAGE</span><span class="o">,</span> <span class="n">picUri</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
            <span class="n">setResult</span><span class="o">(</span><span class="n">Activity</span><span class="o">.</span><span class="na">RESULT_OK</span><span class="o">,</span> <span class="n">result</span><span class="o">);</span>
            <span class="n">finish</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
    </code></pre></figure>

<p>This code handles the button press. First we create a FileOutputStream, then similarly to main_acitivity, we determine the public pictures directory and use our own folder CameraDemo.</p>

<p>We then create a time stamp to use as the image name, exactly as we did in main_activity, however, this time instead of appending .png, we append lines.png, to differentiate the two images.</p>

<p>We then "compress" the image and write it out to the file, since we are using png, it is not actually compressed and the quality factor of 100 has no impact.</p>

<p>Finally, we create an intent object, parse the Uri from file and store the string representation of this with the key EXTRA_MESSAGE. We then setResult of RESULT_OK and finish().</p>

<h3 id="fillarrow">fillArrow()</h3>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">fillArrow</span><span class="o">(</span><span class="n">Canvas</span> <span class="n">canvas</span><span class="o">,</span> <span class="kt">float</span> <span class="n">x0</span><span class="o">,</span> <span class="kt">float</span> <span class="n">y0</span><span class="o">,</span> <span class="kt">float</span> <span class="n">x1</span><span class="o">,</span> <span class="kt">float</span> <span class="n">y1</span><span class="o">)</span> <span class="o">{</span>

      <span class="n">paint</span><span class="o">.</span><span class="na">setStyle</span><span class="o">(</span><span class="n">Paint</span><span class="o">.</span><span class="na">Style</span><span class="o">.</span><span class="na">FILL</span><span class="o">);</span>

      <span class="kt">float</span> <span class="n">deltaX</span> <span class="o">=</span> <span class="n">x1</span> <span class="o">-</span> <span class="n">x0</span><span class="o">;</span>
      <span class="kt">float</span> <span class="n">deltaY</span> <span class="o">=</span> <span class="n">y1</span> <span class="o">-</span> <span class="n">y0</span><span class="o">;</span>
      <span class="kt">double</span> <span class="n">distance</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">sqrt</span><span class="o">((</span><span class="n">deltaX</span> <span class="o">*</span> <span class="n">deltaX</span><span class="o">)</span> <span class="o">+</span> <span class="o">(</span><span class="n">deltaY</span> <span class="o">*</span> <span class="n">deltaY</span><span class="o">));</span>
      <span class="kt">float</span> <span class="n">frac</span> <span class="o">=</span> <span class="o">(</span><span class="kt">float</span><span class="o">)</span> <span class="o">(</span><span class="mi">1</span> <span class="o">/</span> <span class="o">(</span><span class="n">distance</span> <span class="o">/</span> <span class="mi">30</span><span class="o">));</span>

      <span class="kt">float</span> <span class="n">point_x_1</span> <span class="o">=</span> <span class="n">x0</span> <span class="o">+</span> <span class="o">((</span><span class="mi">1</span> <span class="o">-</span> <span class="n">frac</span><span class="o">)</span> <span class="o">*</span> <span class="n">deltaX</span> <span class="o">+</span> <span class="n">frac</span> <span class="o">*</span> <span class="n">deltaY</span><span class="o">);</span>
      <span class="kt">float</span> <span class="n">point_y_1</span> <span class="o">=</span> <span class="n">y0</span> <span class="o">+</span> <span class="o">((</span><span class="mi">1</span> <span class="o">-</span> <span class="n">frac</span><span class="o">)</span> <span class="o">*</span> <span class="n">deltaY</span> <span class="o">-</span> <span class="n">frac</span> <span class="o">*</span> <span class="n">deltaX</span><span class="o">);</span>

      <span class="kt">float</span> <span class="n">point_x_2</span> <span class="o">=</span> <span class="n">x1</span><span class="o">;</span>
      <span class="kt">float</span> <span class="n">point_y_2</span> <span class="o">=</span> <span class="n">y1</span><span class="o">;</span>

      <span class="kt">float</span> <span class="n">point_x_3</span> <span class="o">=</span> <span class="n">x0</span> <span class="o">+</span> <span class="o">((</span><span class="mi">1</span> <span class="o">-</span> <span class="n">frac</span><span class="o">)</span> <span class="o">*</span> <span class="n">deltaX</span> <span class="o">-</span> <span class="n">frac</span> <span class="o">*</span> <span class="n">deltaY</span><span class="o">);</span>
      <span class="kt">float</span> <span class="n">point_y_3</span> <span class="o">=</span> <span class="n">y0</span> <span class="o">+</span> <span class="o">((</span><span class="mi">1</span> <span class="o">-</span> <span class="n">frac</span><span class="o">)</span> <span class="o">*</span> <span class="n">deltaY</span> <span class="o">+</span> <span class="n">frac</span> <span class="o">*</span> <span class="n">deltaX</span><span class="o">);</span>

      <span class="kt">float</span> <span class="n">x_4</span> <span class="o">=</span> <span class="n">x0</span> <span class="o">-</span> <span class="n">deltaX</span> <span class="o">+</span> <span class="o">((</span><span class="mi">1</span> <span class="o">-</span> <span class="n">frac</span><span class="o">)</span> <span class="o">*</span> <span class="n">deltaX</span> <span class="o">+</span> <span class="n">frac</span> <span class="o">*</span> <span class="n">deltaY</span><span class="o">);</span>
      <span class="kt">float</span> <span class="n">y_4</span> <span class="o">=</span> <span class="n">y0</span> <span class="o">-</span> <span class="n">deltaY</span> <span class="o">+</span> <span class="o">((</span><span class="mi">1</span> <span class="o">-</span> <span class="n">frac</span><span class="o">)</span> <span class="o">*</span> <span class="n">deltaY</span> <span class="o">-</span> <span class="n">frac</span> <span class="o">*</span> <span class="n">deltaX</span><span class="o">);</span>
      <span class="kt">float</span> <span class="n">point_x_4</span> <span class="o">=</span> <span class="n">x0</span> <span class="o">+</span> <span class="o">(</span><span class="n">x0</span> <span class="o">-</span> <span class="n">x_4</span><span class="o">);</span>
      <span class="kt">float</span> <span class="n">point_y_4</span> <span class="o">=</span> <span class="n">y0</span> <span class="o">+</span> <span class="o">(</span><span class="n">y0</span> <span class="o">-</span> <span class="n">y_4</span><span class="o">);</span>

      <span class="kt">float</span> <span class="n">point_x_5</span> <span class="o">=</span> <span class="n">x0</span><span class="o">;</span>
      <span class="kt">float</span> <span class="n">point_y_5</span> <span class="o">=</span> <span class="n">y0</span><span class="o">;</span>

      <span class="kt">float</span> <span class="n">x_6</span> <span class="o">=</span> <span class="n">x0</span> <span class="o">-</span> <span class="n">deltaX</span> <span class="o">+</span> <span class="o">((</span><span class="mi">1</span> <span class="o">-</span> <span class="n">frac</span><span class="o">)</span> <span class="o">*</span> <span class="n">deltaX</span> <span class="o">-</span> <span class="n">frac</span> <span class="o">*</span> <span class="n">deltaY</span><span class="o">);</span>
      <span class="kt">float</span> <span class="n">y_6</span> <span class="o">=</span> <span class="n">y0</span> <span class="o">-</span> <span class="n">deltaY</span> <span class="o">+</span> <span class="o">((</span><span class="mi">1</span> <span class="o">-</span> <span class="n">frac</span><span class="o">)</span> <span class="o">*</span> <span class="n">deltaY</span> <span class="o">+</span> <span class="n">frac</span> <span class="o">*</span> <span class="n">deltaX</span><span class="o">);</span>
      <span class="kt">float</span> <span class="n">point_x_6</span> <span class="o">=</span> <span class="n">x0</span> <span class="o">+</span> <span class="o">(</span><span class="n">x0</span> <span class="o">-</span> <span class="n">x_6</span><span class="o">);</span>
      <span class="kt">float</span> <span class="n">point_y_6</span> <span class="o">=</span> <span class="n">y0</span> <span class="o">+</span> <span class="o">(</span><span class="n">y0</span> <span class="o">-</span> <span class="n">y_6</span><span class="o">);</span>

      <span class="n">Path</span> <span class="n">path</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Path</span><span class="o">();</span>
      <span class="n">Path</span> <span class="n">path2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Path</span><span class="o">();</span>
      <span class="n">path</span><span class="o">.</span><span class="na">setFillType</span><span class="o">(</span><span class="n">Path</span><span class="o">.</span><span class="na">FillType</span><span class="o">.</span><span class="na">EVEN_ODD</span><span class="o">);</span>
      <span class="n">path2</span><span class="o">.</span><span class="na">setFillType</span><span class="o">(</span><span class="n">Path</span><span class="o">.</span><span class="na">FillType</span><span class="o">.</span><span class="na">EVEN_ODD</span><span class="o">);</span>

      <span class="n">path</span><span class="o">.</span><span class="na">moveTo</span><span class="o">(</span><span class="n">point_x_1</span><span class="o">,</span> <span class="n">point_y_1</span><span class="o">);</span>
      <span class="n">path</span><span class="o">.</span><span class="na">lineTo</span><span class="o">(</span><span class="n">point_x_2</span><span class="o">,</span> <span class="n">point_y_2</span><span class="o">);</span>
      <span class="n">path</span><span class="o">.</span><span class="na">lineTo</span><span class="o">(</span><span class="n">point_x_3</span><span class="o">,</span> <span class="n">point_y_3</span><span class="o">);</span>
      <span class="n">path</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

      <span class="n">path2</span><span class="o">.</span><span class="na">moveTo</span><span class="o">(</span><span class="n">point_x_6</span><span class="o">,</span><span class="n">point_y_6</span><span class="o">);</span>
      <span class="n">path2</span><span class="o">.</span><span class="na">lineTo</span><span class="o">(</span><span class="n">point_x_5</span><span class="o">,</span><span class="n">point_y_5</span><span class="o">);</span>
      <span class="n">path2</span><span class="o">.</span><span class="na">lineTo</span><span class="o">(</span><span class="n">point_x_4</span><span class="o">,</span> <span class="n">point_y_4</span><span class="o">);</span>
      <span class="n">path2</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

      <span class="n">canvas</span><span class="o">.</span><span class="na">drawPath</span><span class="o">(</span><span class="n">path</span><span class="o">,</span> <span class="n">paint</span><span class="o">);</span>
      <span class="n">canvas</span><span class="o">.</span><span class="na">drawPath</span><span class="o">(</span><span class="n">path2</span><span class="o">,</span> <span class="n">paint</span><span class="o">);</span>
    <span class="o">}</span>
    </code></pre></figure>

<p>This is the code for fillArrow() which I have gotten from Pierre. It uses the start and end coordinates of the line to draw 2 arrowheads on both ends. Unfortunately, I am not familiar enough with the math involved to explain further how this works.</p>

<h1 id="conclusion">Conclusion</h1>

<p>This formal element was intended to give us the skills required to design an Android application that could open a camera, save the image and then draw lines on said image with dimensions. Through this report I believe I have adequately demonstrated how to construct such an application.</p>

        
      </section>

      <footer class="page__meta">
        
        


        
          <p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Updated:</strong> <time datetime="2016-12-10T00:00:00+00:00">December 10, 2016</time></p>
        
      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?via=venomireland&text=Mobile Applications Formal Element https://sdunbar.me/mobile_applications/" class="btn btn--twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https://sdunbar.me/mobile_applications/" class="btn btn--facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://plus.google.com/share?url=https://sdunbar.me/mobile_applications/" class="btn btn--google-plus" title="Share on Google Plus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://sdunbar.me/mobile_applications/" class="btn btn--linkedin" title="Share on LinkedIn"><i class="fa fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="https://sdunbar.me/guides/Migrating-from-Google-Authenticator-to-Authy/" class="pagination--pager" title="Migrating From Google Authenticator To Authy
">Previous</a>
    
    
      <a href="https://sdunbar.me/college/final-year-project-prelim-report/" class="pagination--pager" title="Final Year Project - Preliminary Report
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You May Also Enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "https://sdunbar.me/assets/images/teaser.jpg"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="https://sdunbar.me/personal/sfg-week3/" rel="permalink">Square Foot Gardening, Week 3
</a>
      
    </h2>
    
      <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 




  less than 1 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">Third Week of Square Foot Gardening
</p>
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "https://sdunbar.me/assets/images/teaser.jpg"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="https://sdunbar.me/personal/sfg-week2/" rel="permalink">Square Foot Gardening, Week 2
</a>
      
    </h2>
    
      <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 




  less than 1 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">Second Week of Square Foot Gardening
</p>
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "https://sdunbar.me/assets/images/teaser.jpg"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="https://sdunbar.me/personal/sfg-week1/" rel="permalink">Square Foot Gardening, Week 1
</a>
      
    </h2>
    
      <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 




  1 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">First Week of Square Foot Gardening
</p>
  </article>
</div>
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src=
          
            "https://sdunbar.me/assets/images/teaser.jpg"
          
          alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="https://sdunbar.me/college/final-year-project/" rel="permalink">Final Year Project - Preliminary Report
</a>
      
    </h2>
    
      <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 




  42 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">This is the preliminary report I submitted for my Final Year Project in DT080B
</p>
  </article>
</div>
        
      </div>
    </div>
  
</div>


    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
      <li><a href="https://twitter.com/venomireland"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
    
    
    
      <li><a href="http://github.com/venomireland"><i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    <li><a href="https://sdunbar.me/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2017 Sean Dunbar. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>
      </footer>
    </div>

    <script src="https://sdunbar.me/assets/js/main.min.js"></script>




  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-66918213-3']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>






  </body>
</html>
